<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script type="text/javascript" src="three.min.js"></script>
<script src="http://mrdoob.github.com/three.js/examples/js/Detector.js"></script>
<script src="http://mrdoob.github.com/three.js/examples/js/libs/stats.min.js"></script>
<script src="http://mrdoob.github.com/three.js/examples/js/controls/OrbitControls.js"></script>

<!--<script type="x-shader/x-vertex" id="vertex">-->
    <!--uniform float time;-->


    <!--//varying vec4 posi;-->

    <!--attribute vec3 customColor;-->

    <!--//varying vec3 myCol;-->

    <!--varying vec2 vUv;-->

    <!--uniform sampler2D texture;-->

    <!--void main() {-->
        <!--gl_Position = projectionMatrix *-->
                <!--modelViewMatrix *-->
                <!--vec4(position,1.0);-->

        <!--vUv = uv;-->
    <!--}-->



<!--</script>-->

<!--<script type=x-shader/x-fragment" id="fragment">-->
        <!--uniform float time;-->
        <!--uniform vec3 color;-->
        <!--//varying vec4 posi;-->

        <!--//varying vec3 myCol;-->

        <!--varying vec2 vUv;-->


        <!--uniform sampler2D texture;-->

        <!--highp float random(vec2 co)-->
        <!--{-->
            <!--highp float a = 12.9898;-->
            <!--highp float b = 78.233;-->
            <!--highp float c = 43758.5453;-->
            <!--highp float dt= dot(co.xy ,vec2(a,b));-->
            <!--highp float sn= mod(dt,3.14);-->
            <!--return fract(sin(sn) * c);-->
         <!--}-->

		<!--void main()-->
		<!--{-->
			<!--gl_FragColor = texture2D(texture, vUv);-->
			<!--gl_FragColor.g += 0.01;-->
		<!--}-->


<!--</script>-->
<!--<script type="text/javascript" src="Playground/RTT.js"></script>-->

<!-- TEST STUFF ZEUGS -->
<script id="vs_rt" type="x-shader/x-vertex">
    uniform sampler2D texture;
    varying vec2 vUv;

    void main() {
        vUv = uv;

        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
</script>
<!-- Render texture fragment shader. Runs a simulation step. -->
<script id="fs_rt" type="x-shader/x-fragment">
    uniform sampler2D texture;
    uniform vec2 delta;

    varying vec2 vUv;

    void main() {
        vec4 info = texture2D(texture, vUv);

        vec2 dx = vec2(delta.x, 0.0);
        vec2 dy = vec2(0.0, delta.y);
        float average = ((
        texture2D(texture, vUv - dx).r + texture2D(texture, vUv - dy).r + texture2D(texture, vUv + dx).r + texture2D(texture, vUv + dy).r) * 0.25);

        info.g += (average - info.r) * 2.0;

        /* attenuate the velocity a little so waves do not last forever */
        info.g *= 0.995;

        /* move the vertex along the velocity */
        info.r += info.g;

        // set the new vertex height (VS uses color to determine height)
        gl_FragColor = info;

        gl_FragColor.g += 0.01;
    }
</script>
<!-- Main scene vertex shader. Updates mesh vertex height based on render texture color. -->
<script id="vs_setHeight" type="x-shader/x-vertex">
    uniform sampler2D texture;
    varying vec2 vUv;
    varying vec3 vNormal;

    void main() {
        vUv = uv;
        vNormal = normal;

        vec4 info = texture2D(texture, vUv);

        vec3 newpos = position;

        // Multiply new height so we can actually see the difference.
        newpos.z = info.r * 1000.0;

        gl_Position = projectionMatrix * modelViewMatrix * vec4(newpos, 1.0);
    }
</script>
<!-- Main scene fragment shader. Writes the render texture colors to the main scene mesh. Mainly used for debugging. -->
<script id="fs_setColor" type="x-shader/x-fragment">
    uniform sampler2D texture;
    varying vec2 vUv;

    void main() {
        gl_FragColor = texture2D(texture, vUv);

    }
</script>

<script type="text/javascript" src="Playground/testy.js"></script>
</body>
</html>